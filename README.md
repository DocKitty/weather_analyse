

# 大连市2022-2024年天气数据分析与预测

## 介绍

本项目旨在分析大连市在2022年至2024年期间的天气数据，并基于历史数据构建模型，对未来的月平均最高气温进行预测。

项目主要包含以下几个部分：

1.  **数据爬取**: 从“天气后报”网站自动爬取大连市近三年的历史天气数据以及2025年上半年的实况天气数据。
2.  **数据分析与可视化**:
      * 计算并绘制近三年（2022-2024）的月平均气温（最高与最低）变化趋势图。
      * 统计并绘制近三年各月不同风力等级的分布情况图。
      * 统计并绘制近三年各月不同天气状况的分布图。
3.  **模型训练与预测**:
      * 利用历史数据训练一个8阶多项式回归模型，用于预测月平均最高温度。
      * 使用该模型预测2025年全年的月平均最高温度。
      * 将预测结果与2025年1-6月的真实数据进行对比，并以图表形式展示。

## 数据来源

所有天气数据均爬取自 **天气后报** 网站。

  * **网址**: [https://www.tianqihoubao.com/](https://www.tianqihoubao.com/)

## 功能

  * **历史数据获取**: 自动爬取并保存2022年至2024年大连市每日的最高/最低温度、白天/夜间天气状况、白天/夜间风力风向数据。
  * **近期数据获取**: 自动爬取并保存2025年1月至6月大连市的同类天气数据，用于后续模型验证。
  * **气温趋势分析**: 计算2022-2024年每个月份的平均最高气温和平均最低气温，并通过折线图展示年度气温变化规律。
  * **风力分布分析**: 统计各月不同风力等级出现的年均次数，使用柱状图展示风力特征。
  * **天气状况分析**: 统计各月不同天气（晴、多云、雨、雪等）出现的年均次数，通过柱状图清晰展示。
  * **温度预测**: 基于历史数据训练回归模型，并预测2025年各月份的平均最高气温。通过对比预测曲线和真实数据曲线，评估模型效果。

## 文件结构

```
.
├── data/                      # 存放爬取的数据文件 (自动创建)
│   ├── dalian_weather_history.xlsx # 2022-2024年历史数据
│   └── dalian_weather_now.xlsx     # 2025年1-6月实况数据
├── results/                   # 存放生成的图表 (自动创建)
│   ├── 平均气温变化趋势图.png
│   ├── 早晚风力等级分布情况图.png
│   ├── 早晚天气状况分布图.png
│   ├── 早晚天气状况分布图(简版).png
│   └── 2025年1-12月平均最高温度：预测 vs 真实.png
├── fetch.py                   # 数据爬取模块
├── analyse.py                 # 数据分析与可视化模块
├── train.py                   # 模型训练与预测模块
├── main.py                    # 主程序入口
└── README.md                  # 本文档
```

## 使用方法

### 依赖

本项目基于 Python 3，需要安装以下第三方库：

  * `pandas`
  * `numpy`
  * `scikit-learn`
  * `matplotlib`
  * `seaborn`
  * `requests`
  * `beautifulsoup4`
  * `openpyxl`

### 安装

1.  克隆或下载本仓库到本地。
2.  通过 pip 安装所有依赖。建议使用 `requirements.txt` 文件进行安装。
    ```bash
    pip install pandas numpy scikit-learn matplotlib seaborn requests beautifulsoup4 openpyxl
    ```

### 运行

直接运行主程序 `main.py` 即可。

```bash
python main.py
```

程序首次运行时，会自动执行以下操作：

1.  检查 `data` 目录下是否存在 `dalian_weather_history.xlsx` 和 `dalian_weather_now.xlsx` 文件。
2.  如果文件不存在，程序会自动从网上爬取所需年份（2022-2024及2025年1-6月）的数据，并保存到 `data` 目录。**此过程可能需要几分钟时间，请耐心等待。**
3.  数据准备就绪后，程序会进行数据分析，并将生成的所有图表保存在 `results` 目录下。
4.  最后，程序会显示所有生成的图表。

## 结果

程序运行成功后，你将在 `results` 目录下找到以下图表文件：

1.  **月平均气温变化趋势图.png**: 展示了2022-2024年间，大连市每月平均的最高与最低温度变化情况。

2.  **早晚风力等级分布情况图.png**: 按月份展示了不同风力等级的年均出现次数。

3.  **早晚天气状况分布图.png**: 按月份展示了不同天气状况的年均出现次数。

4.  **早晚天气状况分布图（简版）.png**: 按月份展示了简化后不同天气状况的年均出现次数。

5.  **2025年1-12月平均最高温度：预测 vs 真实.png**: 展示了模型对2025年全年月平均最高温度的预测曲线，并叠加上了1-6月的真实数据作为对比。